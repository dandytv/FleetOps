angular.module("corporateCodesApp",["ngRoute","App.Utils","ngSanitize","ui.select","ngRouteAnimationManager"]).run(function(n,t,i,r){t.tables={};t.obj={};t.$on("updatePath",function(n,t){i.path(t)});t.$on("$routeChangeStart",function(n,i){t.$broadcast("routeChanged",i.pageKey)});t.$on("$routeChangeSuccess",function(){var n=i.path();n=="/new"?(t.obj._type="new",t.obj.corpCd=null):n=="/"?(t.obj._type="index",t.obj.corpCd=null):(t.obj.corpCd=r.corpCd,t.obj._type="edit")})}).factory("Api",function(n,t){var i=t.getRootUrl()+"/CorporateCodes",r=function(){return n({method:"GET",url:Api})};return getFormData=function(t,r){var u=r||i,f=$.param(t);return n({method:"GET",url:u+"/FillData?"+f})},postCorporateCode=function(i){return n({url:t.getRootUrl()+"/CorporateCodes/SaveCorpAcct",method:"POST",data:i})},SaveVelocityLimit=function(i){return n({url:t.getRootUrl()+"/Applications/SaveVelocityLimit",method:"POST",data:i})},SaveCreditAssessmentOperation=function(i){return n({url:t.getRootUrl()+"/Applications/SaveCreditAssessmentOperation",method:"POST",data:i})},SaveAcctDepositInfoOps=function(i){return n({url:t.getRootUrl()+"/Applications/SaveAcctDepositInfoOps",method:"POST",data:i})},ftGetGetAcctDepositInfoDetail=function(i){return n({url:t.getRootUrl()+"/Applications/ftGetGetAcctDepositInfoDetail",method:"POST",data:i})},SaveSKDS=function(i){var r=$.param(i);return n({url:t.getRootUrl()+"/Applications/SaveSKDS",method:"POST",data:i})},ftSKDSDetail=function(i){var r=$.param(i);return n({url:t.getRootUrl()+"/Applications/ftSKDSDetail?"+r,method:"GET"})},ftAddressDetail=function(i){var r=$.param(i);return n({url:t.getRootUrl()+"/Applications/ftAddressDetail?"+r,method:"GET"})},SaveAddress=function(i){return n({url:t.getRootUrl()+"/Applications/SaveAddress",method:"POST",data:i})},DelAddress=function(i){var r=$.param(i);return n({url:t.getRootUrl()+"/Applications/DelAddress?"+r,method:"GET"})},WebGetState=function(i){return n({method:"GET",url:t.getRootUrl()+"/Applications/WebGetState?"+$.param(i)})},ftContactDetail=function(i){var r=$.param(i);return n({url:t.getRootUrl()+"/Applications/ftContactDetail?"+r,method:"GET"})},SaveContact=function(i){return n({url:t.getRootUrl()+"/Applications/SaveContact",method:"POST",data:i})},RemoveContact=function(i){var r=$.param(i);return n({url:t.getRootUrl()+"/Applications/DelContact?"+r,method:"GET"})},SaveMiscellanious=function(i){return n({url:t.getRootUrl()+"/Applications/SaveMisecInfo",method:"POST",data:i})},ftVehicleDetail=function(i){return n({url:t.getRootUrl()+"/Applications/ftVehicleDetail?"+$.param(i),method:"GET"})},SaveVehicleLimit=function(i){return n({url:t.getRootUrl()+"/Applications/SaveVehicleLimit",method:"POST",data:i})},CostCentreMaint=function(i){return n({url:t.getRootUrl()+"/Account/CostCentreMaint",method:"POST",data:i})},FtCostCentreDetail=function(i){return n({url:t.getRootUrl()+"/Account/FtCostCentreDetail?"+$.param(i),method:"GET"})},GetVelocityLimit=function(i){return n({url:t.getRootUrl()+"/Applications/ftVelocityDetail?"+$.param(i),method:"GET"})},RemoveVelocity=function(i){return n({url:t.getRootUrl()+"/Applications/DelVelocityLimit?"+$.param(i),method:"GET"})},ProductDiscountSelect=function(i){var r=$.param(i);return n({url:t.getRootUrl()+"/Account/ProductDiscountSelect?"+r,method:"GET"})},ProductDiscountMaint=function(i){return n({url:t.getRootUrl()+"/Account/ProductDiscountMaint",method:"POST",data:i})},DeleteProductDiscount=function(i){return n({url:t.getRootUrl()+"/Account/DeleteProductDiscount",method:"POST",data:i})},GetPlanIdFromSubsidy=function(i){var r=$.param(i);return n({url:t.getRootUrl()+"/Account/PlanIDProdDisc?"+r,method:"GET"})},ResendActivationEmail=function(i){return n({url:t.getRootUrl()+"/Account/ResendActivationEmail",method:"POST",data:i})},ResetPasswordCounter=function(i){return n({url:t.getRootUrl()+"/Account/ResetPasswordCounter",method:"GET",params:i})},{selectData:r,getFormData:getFormData,postCorporateCode:postCorporateCode,SaveVelocityLimit:SaveVelocityLimit,ftAddressDetail:ftAddressDetail,SaveAddress:SaveAddress,WebGetState:WebGetState,ftContactDetail:ftContactDetail,RemoveContact:RemoveContact,SaveContact:SaveContact,DelAddress:DelAddress,GetVelocityLimit:GetVelocityLimit,RemoveVelocity:RemoveVelocity,SaveAcctDepositInfoOps:SaveAcctDepositInfoOps,ftGetGetAcctDepositInfoDetail:ftGetGetAcctDepositInfoDetail,ProductDiscountSelect:ProductDiscountSelect,ProductDiscountMaint:ProductDiscountMaint,DeleteProductDiscount:DeleteProductDiscount,GetPlanIdFromSubsidy:GetPlanIdFromSubsidy,ResendActivationEmail:ResendActivationEmail,ResetPasswordCounter:ResetPasswordCounter}}).config(function(n,t){var i=$("#hdUrlPrefix").val();n.when("/",{templateUrl:"index.html",controller:"indexController",data:{animationConf:{}}}).when("/new",{templateUrl:i+"/CorporateCodes/Tmpl?Prefix=gen&type=Index",controller:"detailsController",pageKey:"generalInfo",data:{animationConf:{}}}).when("/details/:corpCd?",{templateUrl:i+"/CorporateCodes/Tmpl?Prefix=gen&type=Index",controller:"detailsController",pageKey:"generalInfo",data:{animationConf:{}}}).when("/velocity/:corpCd?",{templateUrl:i+"/Applications/Tmpl?Prefix=vel&type=Index&overrideController=CorporateCodes",controller:"velocityController",pageKey:"velocity",data:{animationConf:{}}}).when("/contacts/:corpCd?",{templateUrl:i+"/Applications/Tmpl?Prefix=con&type=Index&overrideController=CorporateCodes",controller:"contactsController",pageKey:"contacts",data:{animationConf:{}}}).when("/address/:corpCd?",{templateUrl:i+"/Applications/Tmpl?Prefix=add&type=Index&overrideController=CorporateCodes",controller:"addressController",pageKey:"address",data:{animationConf:{}}}).when("/securityDeposit/:corpCd?",{templateUrl:i+"/Applications/Tmpl?Prefix=dep&type=Index&overrideController=CorporateCodes",controller:"depositInfoController",pageKey:"depositInfo",data:{animationConf:{}}}).when("/productDiscount/:corpCd?",{templateUrl:i+"/Account/Tmpl?Prefix=pdc&type=Index&overrideController=CorporateCodes",controller:"productDiscountController",pageKey:"productDiscount",data:{animationConf:{}}}).when("/userManagement/:corpCd?",{templateUrl:i+"/CorporateCodes/Tmpl?Prefix=usm&type=Index",controller:"userManagementController",pageKey:"userManagement"}).when("/AccountList/:corpCd?",{templateUrl:i+"/CorporateCodes/Tmpl?Prefix=acc&type=Index",controller:"AcctCorpListController",pageKey:"AccountList",data:{animationConf:{}}});t.setDefaultAnimation("fade")}).controller("indexController",function(n,t,i){t.obj._type="index";n.dtOptions={serverSide:!0,processing:!0,checkBox:!1,scrollX:!0,id:"tblCorporateCodes",ajax:t.getRootUrl()+"/CorporateCodes/ftGetCorpAcctList",aoColumnDefs:[{sClass:"text-right",aTargets:[2]},],edit:{level:"scope",func:"indexSelected"}};n.$on("indexSelected",function(r,u){t.obj.corpCd=u[0];i.path("/details/"+u[0]);n.$apply()})}).controller("detailsController",function(n,t,i,r,u,f){n._Object=null;var e=t.corpCd||i.obj.corpCd;n.isNew=e?!1:!0;u.getFormData({Prefix:"corp",CorpCd:e}).success(function(t){n._Object=t.Model;n._Selects=t.Selects;i.obj.corpCd=e;n._Object.func="U"});n.PostCorporateCode=function(){f.InfoNotify();n._Object.func=n.isNew?"N":"U";u.postCorporateCode(n._Object).success(function(t){f.finalResultNotify(t.resultCd);t.resultCd.flag==0&&n.isNew&&(i.obj.corpCd=n._Object.CorpCd,i.obj._type="edit",n.isNew=!1,r.path("/details/"+n._Object.CorpCd),n.$apply())})}}).controller("velocityController",function(n,t,i,r,u){var f=i.corpCd||t.corpCd;n.modalOpen=!1;n.dtOptions={serverSide:!0,processing:!0,scrollX:!0,id:"tblVelocity",ajax:t.getRootUrl()+"/Applications/ftVelocityList?SelectedCorpCd="+f,edit:{level:"scope",func:"indexSelected"}};r.getFormData({Prefix:"vel"},t.getRootUrl()+"/Applications").success(function(t){n._Object=t.Model;n._Object.Func=!0;n._Selects=t.Selects});n.newVelocity=function(){n.modalOpen=!0;u.makeObjectNull(n._Object,{SelectedCorpCd:f,Func:"Add"})};n.refresh=function(){t.tables[n.dtOptions.id].fnDraw()};n.$on("indexSelected",function(t,i){n.modalOpen=!0;r.GetVelocityLimit({SelectedCorpCd:f,SelectedVelocityInd:i[9],SelectedProdCd:i[10]}).success(function(t){n._Object=t.velocity;n._Object.Func="Upd";n._Object.SelectedCorpCd=f})});n.SaveVelocityLimit=function(){u.InfoNotify();r.SaveVelocityLimit(n._Object).success(function(i){u.finalResultNotify(i.resultCd);i.resultCd.flag!=1&&(t.tables[n.dtOptions.id].fnDraw(),n.modalOpen=!1)})};n.delete=function(){n.deleteModalOpen=!1;var i=u.getSelectedRow(t.tables[n.dtOptions.id]);i&&(u.InfoNotify(),r.RemoveVelocity({corpCd:f,VelInd:i[9]}).success(function(i){u.finalResultNotify(i.resultCd);t.tables[n.dtOptions.id].fnDraw()}))}}).controller("contactsController",function(n,t,i,r,u){var f=i.corpCd||t.corpCd;n.modalOpen=!1;n.deleteModalOpen=!1;n.isUpdate=!1;r.getFormData({Prefix:"con"},t.getRootUrl()+"/Applications").success(function(t){n._Object=t.Model;n._Selects=t.Selects;n._Object.RefTo="CORP";n._Object.RefKey=f});n.dtOptions={serverSide:!0,processing:!0,scrollX:!1,id:"tblContacts",ajax:t.getRootUrl()+"/Applications/ftContactList?RefTo=CORP&RefKey="+f,edit:{level:"scope",func:"indexSelected"},rowClick:function(){}};n.refresh=function(){t.tables[n.dtOptions.id].fnDraw()};n.modalClick=function(){n.modalOpen=!0;u.makeObjectNull(n._Object,{RefKey:f,RefTo:"CORP",Func:"Add"});n.isUpdate=!1};n.SaveContact=function(){u.InfoNotify();r.SaveContact(n._Object).success(function(i){u.finalResultNotify(i.resultCd);i.resultCd.flag!=1&&(t.tables[n.dtOptions.id].fnDraw(),n.modalOpen=!1)})};n.ResendActivationEmail=function(){var i=u.getSelectedRow(t.tables[n.dtOptions.id]);i&&(u.InfoNotify(),r.ResendActivationEmail({CorpCd:f,UserId:i[5]}).success(function(n){u.finalResultNotify(n.resultCd)}))};n.$on("indexSelected",function(t,i){n.modalOpen=!0;n.isUpdate=!0;r.ftContactDetail({RefCd:i[0],RefKey:f,RefTo:"CORP"}).success(function(t){n._Object=t.contact;n._Object.RefTo="CORP";n._Object.Func="Upd";n._Object.RefKey=f})});n.deleteRecord=function(){n.deleteModalOpen=!1;var i=u.getSelectedRow(t.tables[n.dtOptions.id]);i&&(u.InfoNotify(),r.RemoveContact({RefCd:i[0],RefKey:f,RefTo:"CORP"}).success(function(i){u.finalResultNotify(i.resultCd);t.tables[n.dtOptions.id].fnDraw()}))}}).controller("addressController",function(n,t,i,r,u){n.modalOpen=!1;var f=i.corpCd||t.applId;r.getFormData({Prefix:"add"},t.getRootUrl()+"/Applications").success(function(t){n._Object=t.Model;n._Object.RefTo="CORP";n._Object.RefKey=f;n._Selects=t.Selects});n.dtOptions={serverSide:!0,processing:!0,scrollX:!1,id:"tblAddress",edit:{level:"scope",func:"indexSelected"},aoColumnDefs:[{sWidth:"200px",aTargets:[3,4,5,6,7]},],ajax:t.getRootUrl()+"/Applications/ftAddressList?RefKey="+f+"&RefTo=corp"};n.refresh=function(){t.tables[n.dtOptions.id].fnDraw()};n.modalClick=function(){n.modalOpen=!0;u.makeObjectNull(n._Object,{RefKey:f,RefTo:"corp",Func:"Add"})};n.Save=function(){u.InfoNotify();r.SaveAddress(n._Object).success(function(i){u.finalResultNotify(i.resultCd);i.resultCd.flag==0&&(t.tables[n.dtOptions.id].fnDraw(),n.modalOpen=!1)})};n.$on("indexSelected",function(t,i){n.modalOpen=!0;r.ftAddressDetail({RefCd:i[0],RefKey:f,RefTo:"corp"}).success(function(t){n._Object=t.address;angular.extend(n._Object,{RefKey:f,RefTo:"corp",RefCd:i[0],Func:"Upd"});n.updateState(t.address.SelectedCountry)})});n.Remove=function(){n.deleteModalOpen=!1;var i=u.getSelectedRow(t.tables[n.dtOptions.id]);i&&(u.InfoNotify(),r.DelAddress({RefCd:i[0],RefKey:f,RefTo:"corp"}).success(function(i){u.finalResultNotify(i.result);t.tables[n.dtOptions.id].fnDraw()}))};n.CountryChanged=function(t,i){n.updateState(i)};n.updateState=function(t){r.WebGetState({CountryCd:t}).success(function(t){n._Selects.State=t})}}).controller("depositInfoController",function(n,t,i,r,u){var f=i.corpCd?i.corpCd:t.corpCd;n.modalOpen=!1;r.getFormData({Prefix:"dep"},t.getRootUrl()+"/Applications").success(function(t){n._Object=t.Model;n._Object.CorpCd=f;n._Selects=t.Selects});n.dtOptions={serverSide:!0,processing:!0,scrollX:!0,id:"tblDepositInfo",ajax:t.getRootUrl()+"/Applications/ftGetAcctDepositInfoList?CorpCd="+f,edit:{level:"scope",func:"indexSelected"},aoColumnDefs:[{bVisible:!1,aTargets:[6]},]};n.refresh=function(){t.tables[n.dtOptions.id].fnDraw()};n.$on("indexSelected",function(t,i){n.modalOpen=!0;r.ftGetGetAcctDepositInfoDetail({CorpCd:f,TxnId:i[6]}).success(function(t){n._Object=t.Adi;n._Object.CorpCd=f})});n.modalClick=function(){n.modalOpen=!0;u.makeObjectNull(n._Object,{CorpCd:f})};n.SaveAcctDepositInfoOps=function(){u.InfoNotify();r.SaveAcctDepositInfoOps(n._Object).success(function(i){u.finalResultNotify(i.result);i.result.flag!=1&&(t.tables[n.dtOptions.id].fnDraw(),n.modalOpen=!1)})}}).controller("productDiscountController",function(n,t,i,r,u){n.modalOpen=!1;n.searchModalOpen=!1;n.deleteModalOpen=!1;var f=i.corpCd?i.corpCd:t.obj.corpCd;r.getFormData({Prefix:"pdc",AcctNo:f}).success(function(t){n._Object=t.Model;n._Object.RefTo="CORP";n._Object.RefKey=f;n._Selects=t.Selects});n.dtOptions={serverSide:!0,processing:!0,scrollX:!1,id:"tblProductDiscount",edit:{level:"scope",func:"indexSelected"},ajax:t.getRootUrl()+"/Account/WebProductDiscountListSelect?RefTo=CORP&AcctNo="+f,rowCallback:function(){n.searchModalOpen=!1}};n.SubsidyChanged=function(t,i){i&&r.GetPlanIdFromSubsidy({SelectedProdDiscType:i}).success(function(t){n._Selects.PlanId=t.PlanId})};n.searchProductDiscount=function(){obj=n._Object;var e=t.tables[n.dtOptions.id],i=t.getRootUrl()+"/Account/WebProductDiscountListSelect?",r=$.param({DiscType:obj.SelectedProdDiscType,AcctNo:f,RefTo:"CORP"}),u=angular.extend(n.dtOptions,{serverSide:!0,ajax:i+r,destroy:!0});n.$broadcast("updateDataTable",{options:u})};n.refresh=function(){t.tables[n.dtOptions.id].fnDraw()};n.modalClick=function(){n.modalOpen=!0;u.makeObjectNull(n._Object,{Func:"N",AcctNo:f,RefTo:"CORP"})};n.Save=function(){u.InfoNotify();r.ProductDiscountMaint(n._Object).success(function(i){u.finalResultNotify(i.result);i.result.flag==0&&(t.tables[n.dtOptions.id].fnDraw(),n.modalOpen=!1)})};n.$on("indexSelected",function(t,i){n.modalOpen=!0;r.ProductDiscountSelect({DiscType:i[2],AcctNo:f,Id:i[10],RefTo:"CORP"}).success(function(t){n._Object=t.Discount;n._Object.Func="E";n._Object.AcctNo=f;n._Object.RefTo="CORP"})});n.Remove=function(){n.deleteModalOpen=!1;var i=u.getSelectedRow(t.tables[n.dtOptions.id]);i&&(u.InfoNotify(),r.DeleteProductDiscount({SelectedProdCd:i[0],SelectedProdDiscType:i[2],EffDateFrom:i[5],RefKey:f,AcctNo:f,RefTo:"CORP"}).success(function(i){u.finalResultNotify(i.result);t.tables[n.dtOptions.id].fnDraw()}))}}).controller("AcctCorpListController",function(n,t,i,r,u){var f=u.corpCd?u.corpCd:t.corpCd;t.obj._type="edit";n.dtOptions={serverSide:!0,processing:!0,checkBox:!1,scrollX:!0,id:"tblAcctCorp",ajax:t.getRootUrl()+"/CorporateCodes/ftAcctCorpList?CorpCd="+f,edit:{level:"scope",func:"indexSelected"}};n.refresh=function(){t.tables[n.dtOptions.id].fnDraw()};n.$on("indexSelected",function(i,r){location.href=t.getRootUrl()+"/Account?id="+r[0];n.$apply()})}).controller("userManagementController",function(n,t,i,r,u,f){var e=i.corpCd?i.corpCd:t.obj.corpCd;n.dtOptions={serverSide:!0,processing:!0,scrollX:!1,id:"tblusers",edit:{level:"scope",func:"indexSelected"},ajax:t.getRootUrl()+"/Account/AccountUsersListSelect?CorpCd="+e};n.refresh=function(){t.tables[n.dtOptions.id].fnDraw()};n.ResendActivationEmail=function(){var i=f.getSelectedRow(t.tables[n.dtOptions.id]);i&&(f.InfoNotify(),u.ResendActivationEmail({UserId:i[0],CorpCd:e}).success(function(n){f.finalResultNotify(n.resultCd)}))};n.ResetPasswordCounter=function(){var i=f.getSelectedRow(t.tables[n.dtOptions.id]);i&&(f.InfoNotify(),u.ResetPasswordCounter({AcctNo:i[1],UserId:i[0],CorpCd:e}).success(function(n){f.finalResultNotify(n.resultCd)}))}}).directive("bootstrapWizard",function(){return{restrict:"A",link:function(n,t){t.bootstrapWizard({nextSelector:".button-next",previousSelector:".button-previous",onNext:function(){},onTabShow:function(n,i,r){var f=i.find("li").length,u=r+1,e=u/f*100;t.find(".progress-bar").css({width:e+"%"});t.find(".steps li").each(function(n){$(this).removeClass("complete");n+=1;n<u&&$(this).addClass("complete")});u>=f?($("#wizard2").find(".button-next").hide(),$("#wizard2").find(".button-finish").show()):($("#wizard2").find(".button-next").show(),$("#wizard2").find(".button-finish").hide())}})}}});
//# sourceMappingURL=corporatecodes.min.js.map