angular.module("CollectionApp",["ngRoute","App.Utils","ngSanitize","ui.select","ngRouteAnimationManager"]).run(function(n,t,i,r){t.tables={};t.obj={};t.urlPrefix=$("#hdUrlPrefix").val();t.$on("$routeChangeStart",function(n,i){t.$broadcast("routeChanged",i.pageKey)});t.$on("$routeChangeSuccess",function(){var n=i.path();t.obj.acctNo=r.acctNo;t.obj.eventId=r.eventId})}).factory("Api",function(n,t){var i=t.getRootUrl()+"/Collection",r=function(){return n({method:"GET",url:i})};return GetCollAcctInfo=function(t){var r=i,u=$.param(t);return n({method:"GET",url:r+"/GetCollAcctInfo?"+u})},GetCollFinancialInfo=function(t){var r=i,u=$.param(t);return n({method:"GET",url:r+"/GetCollFinancialInfo?"+u})},GetCollAgeingHistory=function(t){var r=i,u=$.param(t);return n({method:"GET",url:r+"/GetCollAgeingHistory?"+u})},GetCollFollowUp=function(t){var r=i,u=$.param(t);return n({method:"GET",url:r+"/GetCollFollowUp?"+u})},TaskListFillData=function(){var t=i;return n({method:"GET",url:t+"/TaskListFillData"})},SaveCollectionFollowUp=function(t){var r=i;return n({url:r+"/SaveCollectionFollowUp",method:"POST",data:t})},{selectData:r,GetCollAcctInfo:GetCollAcctInfo,GetCollAgeingHistory:GetCollAgeingHistory,GetCollFinancialInfo:GetCollFinancialInfo,GetCollFollowUp:GetCollFollowUp,TaskListFillData:TaskListFillData,SaveCollectionFollowUp:SaveCollectionFollowUp}}).config(function(n,t){var i=$("#hdUrlPrefix").val();n.when("/",{templateUrl:i+"/Collection/Tmpl?Prefix=dal&type=Index",controller:"collectionTaskListController",data:{animationConf:{}}}).when("/CollectionFollowUp/:acctNo?/:eventId?",{templateUrl:i+"/Collection/Tmpl?Prefix=cfu&type=Index",controller:"collectionFollowUpController",pageKey:"CollFollowUp",data:{animationConf:{}}}).when("/AccountInfo/:acctNo?/:eventId?",{templateUrl:i+"/Collection/Tmpl?Prefix=cai&type=Index",controller:"accountInfoController",pageKey:"AcctInfo",data:{animationConf:{}}}).when("/FinancialInfo/:acctNo?/:eventId?",{templateUrl:i+"/Collection/Tmpl?Prefix=cfi&type=Index",controller:"financialInfoController",pageKey:"FinInfo",data:{animationConf:{}}}).when("/CollectionHistory/:acctNo?/:eventId?",{templateUrl:i+"/Collection/Tmpl?Prefix=cch&type=Index",controller:"collectionHistoryController",pageKey:"CollHist",data:{animationConf:{}}});t.setDefaultAnimation("fade")}).controller("collectionFollowUpController",function(n,t,i,r,u,f,e){var o,s,h;n.obj._type="DelinqAcct";n.Prefix="cfu";o=f.eventId||t.obj.eventId;n.collectionNotes=[];n._Object={};r.GetCollFollowUp({EventId:o}).success(function(t){n._Object=t.Model[0];n._Selects=t.Selects;n.collectionNotes=t.Model});s=5;h=0;n.saveCollectionFollowUp=function(){e.InfoNotify();r.SaveCollectionFollowUp({EventId:o,SelectedCollectionSts:n._Object.SelectedCollectionSts,SelectedPriority:n._Object.SelectedPriority,Remarks:$.trim(n.NewNote),RecallDate:n.NewRecallDate}).success(function(t){e.finalResultNotify(t.resultCd);n.NewNote="";n.NewRecallDate="";r.GetCollFollowUp({EventId:o}).success(function(t){n._Object=t.Model[0];n.collectionNotes=t.Model})})}}).controller("accountInfoController",function(n,t,i,r,u,f){n.obj._type="DelinqAcct";n.Prefix="cai";var e=f.acctNo||t.obj.acctNo;r.GetCollAcctInfo({AcctNo:e}).success(function(t){n._Object=t.aaData})}).controller("financialInfoController",function(n,t,i,r,u,f){n.obj._type="DelinqAcct";n.Prefix="cfi";var e=f.acctNo||t.obj.acctNo;r.GetCollFinancialInfo({AcctNo:e}).success(function(t){n._Object=t.aaData});u(function(){n.dtOptionsAgeingHistory={serverSide:!0,processing:!0,checkBox:!1,bAutoWidth:!1,ordering:!1,searching:!1,scrollX:!0,ajax:t.getRootUrl()+"/Collection/GetCollAgeingHistory?AcctNo="+e}},300);u(function(){n.dtOptionsPaymentHistory={serverSide:!0,processing:!0,checkBox:!1,autoWidth:!1,ordering:!1,searching:!1,scrollX:!0,ajax:t.getRootUrl()+"/Collection/GetCollPaymentHistory?AcctNo="+e}},300)}).controller("collectionHistoryController",function(n,t,i,r,u,f){n.obj._type="DelinqAcct";var e=f.acctNo||t.obj.acctNo,o="C";u(function(){n.dtOptionsCollectionHist={serverSide:!0,processing:!0,checkBox:!1,autoWidth:!1,ordering:!1,scrollX:!0,ajax:t.getRootUrl()+"/Collection/GetCollHistory?AcctNo="+e+"&CollectionCaseSts="+o}},300)}).controller("collectionTaskListController",function(n,t,i,r,u,f){n.obj._type="index";n.modalOpen={};n._Object={};r.TaskListFillData().success(function(t){n._Object=t.aaData;n._Selects=t.Dropdown;n.currentUser=t.currentUser});n.loadPendingTask=function(){f.makeObjectNull(n._Object,{});n.dtOptionsPendingTask={serverSide:!0,id:"tblPendingTask",processing:!0,checkBox:!1,destroy:!0,autoWidth:!1,scrollX:!0,ajax:t.getRootUrl()+"/Collection/GetPendingAcctCollection",edit:{level:"scope",func:"indexCollectionSelected"}}};n.loadPendingTask();n.SearchPendingTask=function(){var r=t.getRootUrl()+"/Collection/GetPendingAcctCollection?",i=n._Object,u=$.param({AcctNo:i.AcctNo,SelectedSalesTerritory:i.SelectedSalesTerritory,SelectedCollectionSts:i.SelectedCollectionSts,RecallFromDate:i.RecallFromDate,RecallToDate:i.RecallToDate,CreationFromDate:i.CreationFromDate,CreationToDate:i.CreationToDate,CororateCode:i.CororateCode}),f=angular.extend(n.dtOptionsPendingTask,{serverSide:!0,ajax:r+u,checkBox:!1,destroy:!0,processing:!0,autoWidth:!1,drawCallback:function(){n.modalOpen.PendingTask=!1;n.$apply()}});n.$broadcast("updateDataTable",{options:f})};n.refreshPendingTask=function(){t.tables[n.dtOptionsPendingTask.id].fnDraw()};n.refreshAllTask=function(){t.tables[n.dtOptionsAllTask.id].fnDraw()};n.$on("indexCollectionSelected",function(r,u){t.obj.acctNo=u[1];t.obj.eventId=u[0];i.path("/CollectionFollowUp/"+u[1]+"/"+u[0]);n.$apply()});n.$on("indexThresholdSelected",function(n,i){window.location.href=t.urlPrefix+"/Account?id="+i[0]+"#/tempCreditControl/"+i[0]});n.loadAllTask=function(){f.makeObjectNull(n._Object,{});u(function(){n.dtOptionsAllTask={id:"tblAllTask",serverSide:!0,processing:!0,checkBox:!1,destroy:!0,autoWidth:!1,scrollX:!0,ajax:t.getRootUrl()+"/Collection/GetAllAcctCollection",edit:{level:"scope",func:"indexCollectionSelected"}}},300)};n.SearchAllTask=function(){var r=t.getRootUrl()+"/Collection/GetAllAcctCollection?",i=n._Object,u=$.param({AcctNo:i.AcctNo,SelectedSalesTerritory:i.SelectedSalesTerritory,SelectedCollectionSts:i.SelectedCollectionSts,SelectedOwner:i.SelectedOwner,RecallFromDate:i.RecallFromDate,RecallToDate:i.RecallToDate,CreationFromDate:i.CreationFromDate,CreationToDate:i.CreationToDate,CororateCode:i.CororateCode}),f=angular.extend(n.dtOptionsAllTask,{serverSide:!0,ajax:r+u,checkBox:!1,destroy:!0,processing:!0,autoWidth:!1,drawCallback:function(){n.modalOpen.AllTask=!1;n.$apply()}});n.$broadcast("updateDataTable",{options:f})};n.loadThresholdLimit=function(){u(function(){n.dtOptionsThresholdLimit={serverSide:!0,id:"tbThresholdLimit",processing:!0,checkBox:!1,autoWidth:!1,scrollX:!0,ajax:t.getRootUrl()+"/Collection/GetThresholdLmtCollection",edit:{level:"scope",func:"indexThresholdSelected"}}},300)};n.modalClickPendingTask=function(){n.modalOpen.PendingTask=!0};n.modalClickAllTask=function(){n.modalOpen.AllTask=!0}});
//# sourceMappingURL=collection.min.js.map